## TCP三次握手后如果一直不传输会怎样

尽管tcp协议规范中未要求，但是在很多tcp协议的实际实现中，却提供了保活定时器的功能。

通常情况下，保活功能主要是为服务器程序提供，因为一般情况下，服务器会为一条连接绑定相应的资源，如果这个条连接的另一方突然消失了，服务器方需要感知到这种情况，并把绑定的资源回收回来。

保活定时器一般配置的时间是2小时，即服务器每个2小时就会向客户端发送探查消息，如果收到客户端的反馈消息，则再等2个小时再发；如果等不到客户端的反馈，则再等75秒钟再发一次保活探查，这样连续发送10次，如果10次都没有收到反馈，就认为客户端已经异常断开了，此时，tcp层的程序就会向上层应用程序发送一条“连接超时”的错误反馈。





## TCP三次握手的第三个ack丢了会怎样

当Client端收到Server的SYN+ACK应答后，其状态变为ESTABLISHED，并发送ACK包给Server；

如果此时ACK在网络中丢失，那么Server端该TCP连接的状态为SYN_RECV，并且依次等待3秒、6秒、12秒后重新发送SYN+ACK包，以便Client重新发送ACK包。

如果重发指定次数后，仍然未收到ACK应答，那么一段时间后，Server自动关闭这个连接。

但是Client认为这个连接已经建立，如果Client端向Server写数据，Server端将以RST包响应，方能感知到Server的错误。

当然，有的TCPIP协议的实现不会发RST，可以继续正常进行。

1. tcp是累加ack，而且ack在tcp包头，也就是所有tcp包都应该带有ack数据，中间丢一个纯ack包，不应该影响tcp通讯
2. 第三个握手包只关乎是否已经收到第二个握手的syn包，所以只要后面带数据的ack，能ack到syn包，就没问题

## TCP三次握手后建立连接才可以通信发数据吗？

一般来讲tcp握手的时候不传送数据，只有在连接建立了才能传输数据。